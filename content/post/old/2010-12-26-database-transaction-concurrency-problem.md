---
title: 数据库并发问题
author: fatkun
type: post
date: 2010-12-26T06:40:15+00:00
url: /2010/12/database-transaction-concurrency-problem.html
duoshuo_thread_id:
  - 6300408796191654658
categories:
  - 数据库

---
以下内容为在数据库并发中出现的各种问题。
## 脏读（dirty read）&nbsp;

A事务读到B事务刚修改的值，但是B事务撤销了，也A事务读到的值就是假的了。
<table border="1" cellpadding="0" cellspacing="0" style="font-size: 12px; margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; clear: both; ">  <tr style="font-size: 12px; ">    <th style="font-size: 12px; " width="79">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        时间      </div>    </th>
    <th style="font-size: 12px; " width="204">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        转账事务A      </div>    </th>
    <th style="font-size: 12px; " width="285">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        取款事务B      </div>    </th>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T1      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        开始事务      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T2      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        开始事务      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T3      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        查询账户余额为1000元<span>&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T4      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        取出500元把余额改为500元      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T5      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>查询账户余额为500</strong><strong>元（脏读）</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T6      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        撤销事务余额恢复为1000元      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T7      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        汇入100元把余额改为600元      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T8      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        提交事务      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr></table>
## 不可重复读（unrepeatable read）&nbsp;

&nbsp;&nbsp; 不可重复读是指A事务读取了B事务已经提交的更改数据。假设A在取款事务的过程中，B往该账户转账100元，A两次读取账户的余额发生不一致：
<table border="1" cellpadding="0" cellspacing="0" style="font-size: 12px; margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; clear: both; ">  <tr style="font-size: 12px; ">    <th style="font-size: 12px; " width="79">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        时间      </div>    </th>
    <th style="font-size: 12px; " width="204">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        取款事务A      </div>    </th>
    <th style="font-size: 12px; " width="285">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        转账事务B      </div>    </th>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T1      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>开始事务</strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T2      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>开始事务</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T3      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        查询账户余额为1000元<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T4      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        查询账户余额为1000元      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T5      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        取出100元把余额改为900元      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T6      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>提交事务<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T7      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>查询账户余额为900</strong><strong>元（和T4</strong><strong>读取的不一致）</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr></table>
## 幻象读（phantom read）&nbsp;

**幻象读与不可重复读的区分是，前者是新增时出现，后者是更改或删除出现。**
&nbsp;&nbsp; &nbsp;A事务读取B事务提交的新增数据，这时A事务将出现幻象读的问题。幻象读一般发生在计算统计数据的事务中，举一个例子，假设银行系统在同一个事务中，两次统计存款账户的总金额，在两次统计过程中，刚好新增了一个存款账户，并存入100元，这时，两次统计的总金额将不一致：&nbsp;&nbsp;
<table border="1" cellpadding="0" cellspacing="0" style="font-size: 12px; margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; clear: both; ">  <tr style="font-size: 12px; ">    <th style="font-size: 12px; " width="79">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        时间      </div>    </th>
    <th style="font-size: 12px; " width="204">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        统计金额事务A      </div>    </th>
    <th style="font-size: 12px; " width="285">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        转账事务B      </div>    </th>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T1      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>开始事务</strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T2      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>开始事务</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T3      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        统计总存款数为10000元      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T4      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        新增一个存款账户，存款为100元      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T5      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>提交事务<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T6      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>再次统计总存款数为10100</strong><strong>元（幻象读）</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr></table>
&nbsp;&nbsp;&nbsp; 如果新增数据刚好满足事务的查询条件，这个新数据就进入了事务的视野，因而产生了两个统计不一致的情况。&nbsp;
**幻象读和不可重复读是两个容易混淆的概念**，前者是指读到了其它已经提交事务的新增数据，而后者是指读到了已经提交事务的更改数据（更改或删除），为了避免这两种情况，采取的对策是不同的，防止读取到更改数据，只需要对操作的数据添加行级锁，阻止操作中的数据发生变化，而防止读取到新增数据，则往往需要添加表级锁&mdash;&mdash;将整个表锁定，防止新增数据（Oracle使用多版本数据的方式实现）。&nbsp;
## 第一类丢失更新&nbsp;

&nbsp;&nbsp;&nbsp; A事务撤销时，把已经提交的B事务的更新数据覆盖了。这种错误可能造成很严重的问题，通过下面的账户取款转账就可以看出来：&nbsp;
<table border="1" cellpadding="0" cellspacing="0" style="font-size: 12px; margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; clear: both; ">  <tr style="font-size: 12px; ">    <th style="font-size: 12px; " width="79">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        时间      </div>    </th>
    <th style="font-size: 12px; " width="204">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        取款事务A      </div>    </th>
    <th style="font-size: 12px; " width="285">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        转账事务B      </div>    </th>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T1      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>开始事务</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>&nbsp;</strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T2      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>开始事务</strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T3      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        查询账户余额为1000元<span>&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T4      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        查询账户余额为1000元      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T5      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        汇入100元把余额改为1100元      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T6      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>提交事务</strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T7      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        取出100元把余额改为900元      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T8      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>撤销事务</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T9      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>余额恢复为1000</strong><strong>元（丢失更新）</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr></table>
A事务在撤销时，&ldquo;不小心&rdquo;将B事务已经转入账户的金额给抹去了。&nbsp;
## &nbsp;第二类丢失更新&nbsp;

A事务覆盖B事务已经提交的数据，造成B事务所做操作丢失：&nbsp;&nbsp;
<table border="1" cellpadding="0" cellspacing="0" style="font-size: 12px; margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; clear: both; ">  <tr style="font-size: 12px; ">    <th style="font-size: 12px; " width="79">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        时间      </div>    </th>
    <th style="font-size: 12px; " width="204">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        转账事务A      </div>    </th>
    <th style="font-size: 12px; " width="285">      <div align="center" style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        取款事务B      </div>    </th>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T1      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>&nbsp;</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>开始事务</strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T2      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>开始事务</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T3      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        查询账户余额为1000元<span>&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T4      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        查询账户余额为1000元      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T5      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        取出100元把余额改为900元      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T6      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>提交事务<span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></strong>      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T7      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        汇入100元      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T8      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>提交事务</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr>
  <tr style="font-size: 12px; ">    <td style="font-size: 12px; " valign="top" width="79">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        T9      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="204">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        <strong>把余额改为1100</strong><strong>元（丢失更新）</strong>      </div>    </td>
    <td style="font-size: 12px; " valign="top" width="285">      <div style="margin-top: 0px; margin-right: auto; margin-bottom: 0px; margin-left: auto; padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; border-top-width: 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-style: initial; border-color: initial; color: rgb(51, 51, 51); text-align: left; font-size: 14px; line-height: 21px; ">        &nbsp;      </div>    </td>  </tr></table>
&nbsp;&nbsp;&nbsp; 上面的例子里由于支票转账事务覆盖了取款事务对存款余额所做的更新，导致银行最后损失了100元，相反如果转账事务先提交，那么用户账户将损失100元。
**第一类丢失更新和第二类丢失更新的差别**：前者是由于撤销事务导致丢失更新，后者是因为更新被覆盖。
内容参考来源：<http://tech.it168.com/db/t/2007-05-30/200705300938078_1.shtml>